---
title: "Show Rosters API"
description: "Manage wrestler assignments to shows with many-to-many relationships"
---

## Overview

The Show Rosters API manages the assignment of wrestlers to specific shows. This system allows wrestlers from the global pool to be assigned to multiple shows while maintaining proper roster management and preventing booking conflicts.

## Roster Operations

### Get Wrestlers for Show

<CodeGroup>

```rust Frontend (Leptos)
use crate::types::get_wrestlers_for_show;

let roster = get_wrestlers_for_show(show_id).await?;
```

```rust Tauri Command
#[tauri::command]
pub fn get_wrestlers_for_show(
    state: State<'_, DbState>,
    show_id: i32,
) -> Result<Vec<Wrestler>, String>
```

</CodeGroup>

**Parameters:**
- `show_id`: Integer ID of the show

**Response:**
```json
[
  {
    "id": 1,
    "name": "John Cena",
    "gender": "Male",
    "wins": 25,
    "losses": 5,
    "real_name": "John Felix Anthony Cena Jr.",
    "promotion": "WWE",
    "strength": 95,
    "charisma": 98
  },
  {
    "id": 2,
    "name": "Becky Lynch",
    "gender": "Female",
    "wins": 18,
    "losses": 3,
    "real_name": "Rebecca Quin",
    "promotion": "WWE",
    "strength": 80,
    "charisma": 92
  }
]
```

### Assign Wrestler to Show

<CodeGroup>

```rust Frontend (Leptos)
use crate::types::assign_wrestler_to_show;

let assignment = assign_wrestler_to_show(show_id, wrestler_id).await?;
```

```rust Tauri Command
#[tauri::command]
pub fn assign_wrestler_to_show(
    state: State<'_, DbState>,
    show_id: i32,
    wrestler_id: i32,
) -> Result<ShowRoster, String>
```

</CodeGroup>

**Parameters:**
- `show_id`: Integer ID of the show
- `wrestler_id`: Integer ID of the wrestler to assign

**Response:**
```json
{
  "id": 1,
  "show_id": 1,
  "wrestler_id": 1,
  "assigned_at": "2025-01-31T10:00:00",
  "is_active": true
}
```

### Remove Wrestler from Show

<CodeGroup>

```rust Frontend (Leptos)
use crate::types::remove_wrestler_from_show;

let result = remove_wrestler_from_show(show_id, wrestler_id).await?;
```

```rust Tauri Command
#[tauri::command]
pub fn remove_wrestler_from_show(
    state: State<'_, DbState>,
    show_id: i32,
    wrestler_id: i32,
) -> Result<String, String>
```

</CodeGroup>

**Parameters:**
- `show_id`: Integer ID of the show
- `wrestler_id`: Integer ID of the wrestler to remove

**Response:**
```json
"Wrestler removed from show successfully"
```

## Data Types

### ShowRoster

```rust
pub struct ShowRoster {
    pub id: i32,
    pub show_id: i32,
    pub wrestler_id: i32,
    pub assigned_at: Option<chrono::NaiveDateTime>,
    pub is_active: bool,
}
```

## Database Schema

The show rosters system uses a many-to-many relationship table:

```sql
CREATE TABLE show_rosters (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    show_id INTEGER NOT NULL REFERENCES shows(id) ON DELETE CASCADE,
    wrestler_id INTEGER NOT NULL REFERENCES wrestlers(id) ON DELETE CASCADE,
    assigned_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN NOT NULL DEFAULT TRUE,
    UNIQUE(show_id, wrestler_id)
);
```

## Key Features

### Global Wrestler Pool
- Wrestlers are stored globally and can be assigned to multiple shows
- No promotion-specific restrictions on wrestler assignments
- Wrestlers maintain their identity across all shows

### Unique Assignments
- Database constraint prevents duplicate assignments
- A wrestler can only be assigned to a show once
- Attempting to assign an already-assigned wrestler returns an error

### Active Status Tracking
- `is_active` field allows for temporary roster changes
- Wrestlers can be "inactive" without being completely removed
- Future functionality for draft trades and roster moves

### Automatic Timestamps
- `assigned_at` tracks when wrestler was added to show
- Useful for roster history and reporting

## Architecture Benefits

### Show-Specific Booking
When using the Booker Dashboard:
- Only wrestlers assigned to the current show are available for matches
- Prevents booking conflicts between shows
- Maintains roster integrity

### Storyline Continuity
- Wrestlers can appear on multiple shows for cross-brand storylines
- Maintains character consistency across appearances
- Supports complex wrestling universe narratives

### Flexible Management
- Easy to move wrestlers between shows
- Supports draft scenarios and roster shakeups
- Historical tracking of roster changes

## Error Handling

All show roster operations return `Result<T, String>`:

- **Database connection errors**: "Failed to get database connection"
- **Show not found**: "Show with id {id} not found"
- **Wrestler not found**: "Wrestler with id {id} not found"
- **Duplicate assignment**: "Wrestler {wrestler_id} is already assigned to show {show_id}"
- **Assignment not found**: "Wrestler {wrestler_id} is not assigned to show {show_id}"
- **Foreign key violations**: "Cannot assign - referenced record does not exist"

## Usage Examples

### Building a Show Roster

```rust
// Get all available wrestlers
let all_wrestlers = get_wrestlers().await?;

// Assign selected wrestlers to RAW (show_id = 1)
assign_wrestler_to_show(1, 1).await?; // John Cena
assign_wrestler_to_show(1, 2).await?; // Becky Lynch
assign_wrestler_to_show(1, 3).await?; // Roman Reigns

// Get the complete RAW roster
let raw_roster = get_wrestlers_for_show(1).await?;
```

### Managing Roster Changes

```rust
// Move wrestler from RAW to SmackDown
remove_wrestler_from_show(1, 2).await?; // Remove Becky from RAW
assign_wrestler_to_show(2, 2).await?;   // Add Becky to SmackDown

// Verify the change
let raw_roster = get_wrestlers_for_show(1).await?;      // No longer includes Becky
let smackdown_roster = get_wrestlers_for_show(2).await?; // Now includes Becky
```

### Cross-Brand Storylines

```rust
// Assign wrestler to multiple shows for cross-brand storyline
assign_wrestler_to_show(1, 1).await?; // John Cena on RAW
assign_wrestler_to_show(2, 1).await?; // John Cena on SmackDown
assign_wrestler_to_show(3, 1).await?; // John Cena on NXT

// Can now book John Cena on all three shows
```

## Integration with Match Booking

The show roster system integrates seamlessly with match booking:

```rust
// When booking a match, only show roster wrestlers are available
let show_roster = get_wrestlers_for_show(show_id).await?;

// Create match with roster wrestlers
let match_data = MatchData {
    show_id: show_id,
    match_type: "Singles".to_string(),
    // ... other fields
};

let match_obj = create_match(match_data).await?;

// Add participants (must be on show roster)
add_wrestler_to_match(match_obj.id, roster_wrestler_1.id, None, Some(1)).await?;
add_wrestler_to_match(match_obj.id, roster_wrestler_2.id, None, Some(2)).await?;
```

## Future Enhancements

The show roster system is designed to support future features:

- **Draft System**: Automated roster assignments
- **Trade Deadlines**: Time-limited roster changes
- **Roster Limits**: Maximum wrestlers per show
- **Inactive Status**: Temporary wrestler removal without deletion
- **Roster History**: Track all roster changes over time